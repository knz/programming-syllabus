<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.20.1: https://docutils.sourceforge.io/" />
<title>Two-dimensional arrays</title>
<link rel="stylesheet" href="aux/min.css" type="text/css" />
</head>
<body>
<div class="document" id="two-dimensional-arrays">
<h1 class="title">Two-dimensional arrays</h1>

<p>The arrays you have been using so far have only held one column of
data. But you can set up an array to hold more than one column. These
are called two-dimensional (2d) arrays. As an example, think of a
spreadsheet with rows and columns. If you have 6 rows and 5 columns
then your spreadsheet can hold 30 numbers.</p>
<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#simple-view-on-2d-arrays" id="toc-entry-1">Simple view on 2d arrays</a></li>
<li><a class="reference internal" href="#advanced-views-on-2d-arrays" id="toc-entry-2">Advanced views on 2d arrays</a><ul>
<li><a class="reference internal" href="#left-and-right-parts-in-a-type" id="toc-entry-3">Left and right parts in a type</a></li>
<li><a class="reference internal" href="#left-and-right-parts-in-a-declaration" id="toc-entry-4">Left and right parts in a declaration</a></li>
<li><a class="reference internal" href="#left-and-right-parts-in-a-definition" id="toc-entry-5">Left and right parts in a definition</a></li>
<li><a class="reference internal" href="#putting-things-together" id="toc-entry-6">Putting things together</a></li>
<li><a class="reference internal" href="#abbrevation-for-multiple-definitions" id="toc-entry-7">Abbrevation for multiple definitions</a></li>
<li><a class="reference internal" href="#triangular-and-other-heterogeneous-arrays" id="toc-entry-8">Triangular and other heterogeneous arrays</a></li>
</ul>
</li>
<li><a class="reference internal" href="#important-concepts" id="toc-entry-9">Important concepts</a></li>
<li><a class="reference internal" href="#further-reading" id="toc-entry-10">Further reading</a></li>
<li><a class="reference internal" href="#copyright-and-licensing" id="toc-entry-11">Copyright and licensing</a></li>
</ul>
</div>
<div class="section" id="simple-view-on-2d-arrays">
<h1><a class="toc-backref" href="#toc-entry-1">Simple view on 2d arrays</a></h1>
<p>To use a 2d array in programs, like usual with arrays and objects we
must separate <em>declarations</em> that prepare names from <em>definitions</em>
that reserve space in memory. The following constructs are used for 2d
arrays:</p>
<p><em>2d array declaration:</em></p>
<blockquote>
<p>Syntax:</p>
<blockquote>
<p>&lt;type&gt; <tt class="docutils literal"><span class="pre">[][]</span></tt> &lt;name&gt; <tt class="docutils literal">;</tt></p>
<p>(A type, followed by two pairs of brackets, followed by an
identifier, followed by a semicolon.)</p>
</blockquote>
<p>Semantics:</p>
<blockquote>
Prepare the name on the right so that it can later refer to a 2d array
where each element is of the type indicated on the left.</blockquote>
</blockquote>
<p><em>2d array definition:</em></p>
<blockquote>
<p>Syntax:</p>
<blockquote>
<tt class="docutils literal">new</tt> &lt;type&gt; <tt class="docutils literal">[</tt> &lt;height&gt; <tt class="docutils literal">][</tt> &lt;width&gt; <tt class="docutils literal">]</tt></blockquote>
<p>Semantics:</p>
<blockquote>
Reserve space for a 2d array with the indicated number of
rows and columns.</blockquote>
</blockquote>
<p>For example:</p>
<pre class="code java literal-block">
<span class="kt">int</span><span class="o">[][]</span><span class="w"> </span><span class="n">a</span><span class="p">;</span><span class="w">
</span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">int</span><span class="o">[</span><span class="mi">6</span><span class="o">][</span><span class="mi">5</span><span class="o">]</span><span class="p">;</span>
</pre>
<p>This prepares the name “<tt class="docutils literal">a</tt>” then binds it to a newly allocated 2d
array of 6 rows and 5 columns, with each element of type <tt class="docutils literal">int</tt>.</p>
<p>Like usual, you can combine declaration and definition as follows:</p>
<p><em>Combined 2d array declaration and definition</em></p>
<blockquote>
<p>Syntax:</p>
<blockquote>
&lt;type&gt; <tt class="docutils literal"><span class="pre">[][]</span></tt> &lt;name&gt; <tt class="docutils literal">=</tt> <tt class="docutils literal">new</tt> &lt;type&gt; <tt class="docutils literal">[</tt> &lt;height&gt; <tt class="docutils literal">][</tt> &lt;width&gt; <tt class="docutils literal">]</tt> <tt class="docutils literal">;</tt></blockquote>
<p>Semantics:</p>
<blockquote>
Combines the corresponding declaration and definition.</blockquote>
</blockquote>
<p>Once you have a 2d array you can use them in program using two pairs
of brackets to access individual elements, like this:</p>
<p><em>2d element access</em></p>
<blockquote>
<p>Syntax:</p>
<blockquote>
&lt;expression&gt; <tt class="docutils literal">[</tt> &lt;rowindex&gt; <tt class="docutils literal">][</tt> &lt;columnindex&gt; <tt class="docutils literal">]</tt></blockquote>
<p>Semantics:</p>
<blockquote>
Evaluates the expression on the left, which must give a 2d
array; then access the element indicated by the row index and
column index in the 2d array.</blockquote>
</blockquote>
<p>For example:</p>
<pre class="code java literal-block">
<span class="kt">void</span><span class="w"> </span><span class="nf">printDiagonal</span><span class="p">(</span><span class="kt">int</span><span class="o">[][]</span><span class="w"> </span><span class="n">array</span><span class="p">)</span><span class="w">
</span><span class="p">{</span><span class="w">
   </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">;</span><span class="w">
   </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">array</span><span class="p">.</span><span class="na">length</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w">
       </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">array</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">i</span><span class="o">]</span><span class="p">);</span><span class="w">
</span><span class="p">}</span>
</pre>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If “<tt class="docutils literal">array</tt>” is a name that refers to a 2d array,
“<tt class="docutils literal">array.length</tt>” gives the number of rows in the array.  To
access the number of columns, use “<tt class="docutils literal"><span class="pre">array[0].length</span></tt>” (length of
the 1st row).</p>
</div>
<p>By using only the definitions in this first section, you can pass
the course and use 2d arrays successfully in your own programs.</p>
</div>
<div class="section" id="advanced-views-on-2d-arrays">
<h1><a class="toc-backref" href="#toc-entry-2">Advanced views on 2d arrays</a></h1>
<p>If we look at the Java language definition in more details, we can see
that there is no such thing as a real “2d array”. Instead the notion
of a “2d array” in Java is built entirely using the more simple
single-dimensional array and the difference between name and
definition already seen previously. The various constructs described
in the section above are actually simplified abbreviations for
compound uses of single-dimensional arrays.</p>
<p>To understand this fully, it is necessary to reveal a dark, sad and
unfortunate corner of the Java language, that was inherited from C.</p>
<div class="section" id="left-and-right-parts-in-a-type">
<h2><a class="toc-backref" href="#toc-entry-3">Left and right parts in a type</a></h2>
<p>In Java, like in C before it, the syntactic form of a type must be
separated into a left part and a right part.</p>
<p>All primitive and class types have only a left part. That is, the
syntactic form of the type “<tt class="docutils literal">int</tt>” has a left part “<tt class="docutils literal">int</tt>” and an
empty right part.</p>
<p>All array types, in contrast, have both a left and a right part. The
left part is the element type. The right part is the array-ness or
number of elements. For example, the syntactic form of the type
“<tt class="docutils literal">int[]</tt>” has a left part “<tt class="docutils literal">int</tt>” and a right part “<tt class="docutils literal">[]</tt>”.</p>
</div>
<div class="section" id="left-and-right-parts-in-a-declaration">
<h2><a class="toc-backref" href="#toc-entry-4">Left and right parts in a declaration</a></h2>
<p>The separation in left and right parts are important to understand the
real (“secret”) form of a declaration in Java:</p>
<p><em>Array declaration (for realzzz)</em></p>
<blockquote>
<p>Syntax:</p>
<blockquote>
<p>&lt;leftpart&gt; <tt class="docutils literal">[]</tt> &lt;rightpart&gt;  &lt;name&gt; <tt class="docutils literal">;</tt></p>
<p>(The left part of a type, followed by <tt class="docutils literal">[]</tt>, followed by the
right part, followed by a name, followed by a semicolon.)</p>
</blockquote>
<p>Semantics:</p>
<blockquote>
Prepares a name that can later refer to a 1d array where the
element type is formed by placing the left part and right part
together.</blockquote>
</blockquote>
<p>For example, in:</p>
<pre class="literal-block">
int[] a;
</pre>
<p>The left part is “<tt class="docutils literal">int</tt>”, and the right part is empty. So “<tt class="docutils literal">a</tt>”
refers to a 1d array where the element type is of type “<tt class="docutils literal">int</tt>”.</p>
<p>In contrast, consider:</p>
<pre class="literal-block">
double[][] b;
</pre>
<p>The left part is “<tt class="docutils literal">double</tt>” and the right part is “<tt class="docutils literal">[]</tt>”. So
“<tt class="docutils literal">b</tt>” refers to a 1d array where the element type is of type
“<tt class="docutils literal">double[]</tt>”.</p>
</div>
<div class="section" id="left-and-right-parts-in-a-definition">
<h2><a class="toc-backref" href="#toc-entry-5">Left and right parts in a definition</a></h2>
<p>Likewise, the separation in left and right parts is necessary to understand
the real form of an array definition:</p>
<p><em>Array definition (for realzzz):</em></p>
<blockquote>
<p>Syntax:</p>
<blockquote>
<p><tt class="docutils literal">new</tt> &lt;leftpart&gt; <tt class="docutils literal">[</tt> &lt;size&gt; <tt class="docutils literal">]</tt> &lt;rightpart&gt;</p>
<p>(The keyword “<tt class="docutils literal">new</tt>” followed by the left part of a type,
followed by a size between brackets, followed by the right part of a type.)</p>
</blockquote>
<p>Semantics:</p>
<blockquote>
<p>Reserves spaces for a 1d array with the number of element indicated
between the brackets, where each element is of the type defined
by taking the left and right part together.</p>
<p>If the element type is an array type, the definition only
<em>prepares the names</em> for the individual element arrays, and does
not actually reserve the space.</p>
</blockquote>
</blockquote>
<p>For example:</p>
<pre class="literal-block">
new int[3]
</pre>
<p>The left part is “<tt class="docutils literal">int</tt>”, the right part is empty, so an array of 3
elements of type “<tt class="docutils literal">int</tt>” is defined.</p>
<p>Another example:</p>
<pre class="literal-block">
new int[3][]
</pre>
<p>The left part is “<tt class="docutils literal">int</tt>”, the right part is “<tt class="docutils literal">[]</tt>”, so an array
of 3 elements of type “<tt class="docutils literal">int[]</tt>” is defined. The 3 elements are merely <em>names</em>.</p>
<p>It is important to understand that a definition with <tt class="docutils literal">new <span class="pre">xxx[n][]</span></tt>
only prepares names for the rows, so the following code produces an error:</p>
<pre class="literal-block">
int[][] a = new int[3][];

System.out.println(a[0][1]);
</pre>
<p>The error is that <tt class="docutils literal">a[0]</tt> is a name which has not yet been bound to
an actual array, so <tt class="docutils literal"><span class="pre">a[0][1]</span></tt> cannot access a valid element.</p>
</div>
<div class="section" id="putting-things-together">
<h2><a class="toc-backref" href="#toc-entry-6">Putting things together</a></h2>
<p>Using the constructs from the previous sections
it becomes possible to write the following:</p>
<pre class="code java literal-block">
<span class="kt">double</span><span class="o">[][]</span><span class="w"> </span><span class="n">r</span><span class="p">;</span><span class="w">
</span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">double</span><span class="o">[</span><span class="mi">6</span><span class="o">][]</span><span class="p">;</span><span class="w">
</span><span class="n">r</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">double</span><span class="o">[</span><span class="mi">5</span><span class="o">]</span><span class="p">;</span><span class="w">
</span><span class="n">r</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">double</span><span class="o">[</span><span class="mi">5</span><span class="o">]</span><span class="p">;</span><span class="w">
</span><span class="n">r</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">double</span><span class="o">[</span><span class="mi">5</span><span class="o">]</span><span class="p">;</span><span class="w">
</span><span class="n">r</span><span class="o">[</span><span class="mi">3</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">double</span><span class="o">[</span><span class="mi">5</span><span class="o">]</span><span class="p">;</span><span class="w">
</span><span class="n">r</span><span class="o">[</span><span class="mi">4</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">double</span><span class="o">[</span><span class="mi">5</span><span class="o">]</span><span class="p">;</span><span class="w">
</span><span class="n">r</span><span class="o">[</span><span class="mi">5</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">double</span><span class="o">[</span><span class="mi">5</span><span class="o">]</span><span class="p">;</span><span class="w">
</span><span class="n">r</span><span class="o">[</span><span class="mi">2</span><span class="o">][</span><span class="mi">3</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">42</span><span class="p">;</span>
</pre>
<p>The first line declares a name “<tt class="docutils literal">r</tt>” that can refer to an 1d array
where every element is a name for an 1d array where every element is a
<tt class="docutils literal">double</tt>.</p>
<p>The second line defines an array of 6 elements, where each element
is a name that can refer to an array of <tt class="docutils literal">double</tt>.</p>
<p>The 3rd line defines an array of 5 elements of type <tt class="docutils literal">double</tt>, then sets
the name in 1st position of <tt class="docutils literal">r</tt> to that new array.</p>
<p>The 3th line defines another array of 5 elements, and binds the name in 2nd position of <tt class="docutils literal">r</tt> to it.</p>
<p>And so on, until the last line. This accesses first <tt class="docutils literal">r[2]</tt>, which
gives a name for an array of double; then it accesses the item at
position 3 (4th item from the beginning) and changes it to 42.</p>
</div>
<div class="section" id="abbrevation-for-multiple-definitions">
<h2><a class="toc-backref" href="#toc-entry-7">Abbrevation for multiple definitions</a></h2>
<p>The example above uses a construct which is
quite common:</p>
<pre class="literal-block">
type[][] r = new type[n][];
r[0] = new double[m];
r[1] = new double[m];
...
r[n-1] = new double[m];
</pre>
<p>As usual, when a construct is commonly found, the language designers
provide a shorter form to simplify the code. In this case we  use the following:</p>
<p><em>Multi-dimensional array definition:</em></p>
<blockquote>
<p>Syntax:</p>
<blockquote>
<tt class="docutils literal">new</tt> &lt;leftpart&gt; <tt class="docutils literal">[</tt> &lt;size1&gt; <tt class="docutils literal">][</tt> &lt;size2&gt; <tt class="docutils literal">]</tt> &lt;rightpart&gt;</blockquote>
<p>Semantics:</p>
<blockquote>
First defines a new array with &lt;size1&gt; elements of type
“&lt;leftpart&gt;[]&lt;rightpart&gt;” (they are all names). Then for every
position in this first array, create a new array of &lt;size2&gt;
elements of type “&lt;leftpart&gt;&lt;rightpart&gt;”, then bind the name in
the first array to the newly created array.</blockquote>
</blockquote>
<p>For example:</p>
<pre class="literal-block">
int[][] r;
r = new int[3][5];
</pre>
<p>is equivalent to:</p>
<pre class="literal-block">
int[][] r;
r = new int[3][];
r[0] = new int[5];
r[1] = new int[5];
r[2] = new int[5];
</pre>
<p>This generalizes directly to more dimensions. For example:</p>
<pre class="literal-block">
int[][][] r;
r = new int[2][3][4];
</pre>
<p>is equivalent to:</p>
<pre class="literal-block">
int[][][] r;
r = new int[2][][];
r[0] = new int[3][4];
r[1] = new int[3][4];
</pre>
<p>which itself is equivalent to:</p>
<pre class="literal-block">
int[][][] r;
r = new int[2][][];
r[0] = new int[3][];
r[0][0] = new int[4];
r[0][1] = new int[4];
r[0][2] = new int[4];
r[1] = new int[3][];
r[1][0] = new int[4];
r[1][1] = new int[4];
r[1][2] = new int[4];
</pre>
<p>So as you can see, the combined construct eventually expands to only
uses of single-dimensional (1d) arrays.</p>
</div>
<div class="section" id="triangular-and-other-heterogeneous-arrays">
<h2><a class="toc-backref" href="#toc-entry-8">Triangular and other heterogeneous arrays</a></h2>
<p>Since each element in an array of
type <tt class="docutils literal"><span class="pre">int[][]</span></tt> is a <em>name</em> for an array of type <tt class="docutils literal">int[]</tt>, there
is nothing remaining that forces every name to refer to arrays of the same sizes.</p>
<p>Actually, it is quite common to exploit this mechanism to define
<em>triangular arrays</em>:</p>
<pre class="code java literal-block">
<span class="kt">double</span><span class="o">[][]</span><span class="w"> </span><span class="n">r</span><span class="p">;</span><span class="w">
</span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">double</span><span class="o">[</span><span class="mi">4</span><span class="o">][]</span><span class="p">;</span><span class="w">
</span><span class="n">r</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">double</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="p">;</span><span class="w">
</span><span class="n">r</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">double</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span><span class="p">;</span><span class="w">
</span><span class="n">r</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">double</span><span class="o">[</span><span class="mi">3</span><span class="o">]</span><span class="p">;</span><span class="w">
</span><span class="n">r</span><span class="o">[</span><span class="mi">3</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">double</span><span class="o">[</span><span class="mi">4</span><span class="o">]</span><span class="p">;</span>
</pre>
<p>This feature is commonly used in programs that perform linear algebra
on symmetrical matrices, since this way only half of the space is
needed in memory to store all the useful values.</p>
<p>In general, if a 1d array has an array type as element type, and
different elements point to arrays of different sizes, the array is
said to be an <em>heterogeneous multi-dimensional array</em>.</p>
</div>
</div>
<div class="section" id="important-concepts">
<h1><a class="toc-backref" href="#toc-entry-9">Important concepts</a></h1>
<ul class="simple">
<li>2d array declaration and definition (simple view)</li>
<li>(optional) separation in left and right part of a type syntax;</li>
<li>(optional) how 2d arrays are formed using 1d arrays;</li>
<li>(optional) triangular and heterogeneous 2d arrays.</li>
</ul>
</div>
<div class="section" id="further-reading">
<h1><a class="toc-backref" href="#toc-entry-10">Further reading</a></h1>
<ul class="simple">
<li>Programming in Java, section 3.8.5 (pp. 120-122) &amp; section 7.5 (pp. 363-366)</li>
<li>Absolute Java, section 6.4 (pp. 399-425)</li>
</ul>
</div>
<hr class="docutils" />
<div class="section" id="copyright-and-licensing">
<h1><a class="toc-backref" href="#toc-entry-11">Copyright and licensing</a></h1>
<p>Copyright © 2014, Raphael ‘kena’ Poss.
Permission is granted to distribute, reuse and modify this document
according to the terms of the Creative Commons Attribution-ShareAlike
4.0 International License.  To view a copy of this license, visit
<a class="reference external" href="http://creativecommons.org/licenses/by-sa/4.0/">http://creativecommons.org/licenses/by-sa/4.0/</a>.</p>
</div>
</div>
</body>
</html>
